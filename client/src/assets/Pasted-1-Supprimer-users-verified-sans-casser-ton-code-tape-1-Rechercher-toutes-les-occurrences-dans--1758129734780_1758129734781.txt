1ï¸âƒ£ Supprimer users.verified sans casser ton code

Ã‰tape 1 : Rechercher toutes les occurrences dans ton code (backend + frontend).

Exemple : grep -R "verified" client/src server/src

Ã‰tape 2 : VÃ©rifier le contexte :

Si câ€™est dans users.verified â†’ tu remplaces par professional_accounts.is_verified (si câ€™est liÃ© aux pros).

Si câ€™est juste un check global â†’ probablement inutile â†’ tu supprimes.

Ã‰tape 3 : Quand tu es sÃ»r que plus rien nâ€™y fait rÃ©fÃ©rence â†’ tu supprimes la colonne de la DB.

âš ï¸ Ne supprime pas directement dans la DB avant dâ€™avoir fait le scan, sinon tu risques un crash.

2ï¸âƒ£ users.profile_completed â€“ quand passe-t-il Ã  true ?

IdÃ©e : ce champ doit juste indiquer si lâ€™utilisateur a fini lâ€™onboarding de base.

Pour un particulier :

Il complÃ¨te son profil minimal (nom, ville, tÃ©lÃ©phone, etc.).

â†’ Ã€ la validation â†’ profile_completed = true.

Pour un pro :

DÃ¨s quâ€™il finit le formulaire dâ€™infos dâ€™entreprise (avant paiement/vÃ©rification).

â†’ Tu mets profile_completed = true.

Le reste (paiement + vÃ©rif) est gÃ©rÃ© dans professional_accounts.

ğŸ‘‰ Ã‡a Ã©vite que le modal dâ€™onboarding rÃ©apparaisse sans cesse.

3ï¸âƒ£ Dans professional_accounts : is_verified / verification_status / status

is_verified (boolean)
â†’ Câ€™est la validation finale (admin a approuvÃ©).

true = compte pro validÃ©.

false = pas encore validÃ©.

verification_status (enum/string)
â†’ Ã‡a dÃ©crit le workflow de vÃ©rification.
Exemple typique :

not_started

pending_docs

under_review

rejected

approved

status (champ supplÃ©mentaire, par dÃ©faut under_review)
â†’ Ã‡a sent le doublon avec verification_status.

Si tu nâ€™as pas de logique spÃ©cifique qui dÃ©pend de status, tu peux soit :

Le supprimer (recommandÃ© pour simplification).

Soit le renommer clairement (subscription_status, account_status) si câ€™Ã©tait pour autre chose (genre suivi du paiement).

âœ… RÃ©sumÃ© clair

Dans users :

Garder uniquement profile_completed.

Supprimer verified.

Dans professional_accounts :

Garder is_verified + verification_status.

Clarifier ou supprimer status.